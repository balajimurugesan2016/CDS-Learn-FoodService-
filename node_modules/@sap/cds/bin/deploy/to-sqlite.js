module.exports = async function deploy_to_sqlite (_model, kind, _db, {to:url}) {
    const cds = require('../../lib/cds')
    const conf = cds.env.requires.db || {}
    const model = _model || conf.model || ['db','srv']
    const database = _db || kind === 'sqlite' ? 'sqlite.db': conf.credentials && conf.credentials.database
    const db = await cds.deploy(model) .to (url ? url : database ? kind + ':' + database : kind)
    db.disconnect()  // REVISIT: we should NOT require to explicitly disconnect
    if (database && database !== ':memory:') console.log (`/> successfully deployed to '${database}'`)
    else  console.log (`/> successfully test-deployed to sqlite in-memory db`)
}
/* eslint no-console: off */
